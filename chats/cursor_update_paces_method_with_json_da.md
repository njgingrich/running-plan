# Update paces method with JSON data
_Exported on 6/2/2025 at 08:54:57 CDT from Cursor (0.50.5)_

---

**User**

Take the updatePaces method and replace the existing pace-card elements by extracting the paces object from the plan json file. Update other functions as needed to use the paceType, multiplier, fast, and slow properties in the json

---

**Cursor**

I'll help you update the paces functionality based on the plan's JSON configuration. First, let me search for the relevant code to understand what needs to be modified.

Based on the search results, I can see the current implementation and the JSON configuration. I'll update the code to use the pace configuration from the plan JSON file. Let me make the necessary changes:

```javascript
// ... existing code ...

function calculatePaces(marathonPaceDuration) {
    const plan = State.plan;
    if (!plan || !plan.paces) return;

    // Calculate base paces
    const estimated10kPaceDuration = estimate10kPace(marathonPaceDuration);

    // Process each pace type from the plan
    Object.entries(plan.paces).forEach(([type, config]) => {
        const paceElement = document.getElementById(`${type}Pace`);
        const rangeElement = document.getElementById(`${type}Range`);
        if (!paceElement || !rangeElement) return;

        let basePace = marathonPaceDuration;
        if (config.multiplier) {
            // If there's a multiplier, apply it to the base pace
            const baseSeconds = durationToSeconds(basePace);
            basePace = secondsToDuration(baseSeconds * config.multiplier);
        }

        if (config.paceType === 'race') {
            // Race pace is just the marathon pace
            paceElement.textContent = `${formatPaceDuration(marathonPaceDuration)} /mile`;
            rangeElement.textContent = 'Target Race Pace';
        } else {
            // Calculate adjusted paces based on configuration
            const [slowPace, middlePace, fastPace] = getAdjustedPaces(
                basePace,
                config.paceType === 'pct' ? 'PCT' : 'TIME',
                config.fast,
                config.slow
            );

            paceElement.textContent = `${formatPaceDuration(middlePace)} /mile`;
            rangeElement.textContent = formatPaceRange(fastPace, slowPace);
        }
    });
}

// ... existing code ...
```

Now I need to update the HTML to match the pace types from the plan configuration:

```html
// ... existing code ...
            <div class="calculator-card training-paces">
                <h2>Training Paces</h2>
                <div class="results" id="results">
                    <!-- Pace cards will be dynamically generated by JavaScript -->
                </div>
            </div>
// ... existing code ...
```

Now I'll add the function to generate the pace cards dynamically:

```javascript
// ... existing code ...

function updatePaces() {
    const plan = State.plan;
    
    // Generate pace cards based on plan configuration
    const resultsContainer = document.getElementById('results');
    resultsContainer.innerHTML = '';

    Object.entries(plan.paces).forEach(([type, config]) => {
        const card = document.createElement('div');
        card.className = 'pace-card';

        const title = document.createElement('h3');
        title.textContent = plan.types[type] || type;
        card.appendChild(title);

        const paceInfo = document.createElement('div');
        paceInfo.className = 'pace-info';

        const paceMain = document.createElement('div');
        paceMain.className = 'pace-main';
        const pace = document.createElement('p');
        pace.className = 'pace';
        pace.id = `${type}Pace`;
        pace.textContent = '--:-- /mile';
        paceMain.appendChild(pace);
        paceInfo.appendChild(paceMain);

        const paceRangeContainer = document.createElement('div');
        paceRangeContainer.className = 'pace-range-container';
        const paceRange = document.createElement('p');
        paceRange.className = 'pace-range';
        paceRange.id = `${type}Range`;
        paceRange.textContent = '--:-- - --:-- /mile';
        paceRangeContainer.appendChild(paceRange);
        paceInfo.appendChild(paceRangeContainer);

        card.appendChild(paceInfo);

        const description = document.createElement('p');
        description.className = 'description';
        description.textContent = config.description || '';
        card.appendChild(description);

        resultsContainer.appendChild(card);
    });

    // Recalculate paces if we have a marathon pace
    const paceInput = document.getElementById('goalPace');
    if (paceInput.value && /^\d{1,2}:\d{2}$/.test(paceInput.value)) {
        const paceDuration = parseDurationString(paceInput.value);
        calculatePaces(paceDuration);
    }
}

// ... existing code ...

document.addEventListener('DOMContentLoaded', async () => {
    // ... existing code ...

    // Update select options based on known plans
    State.plan = Object.values(PLANS)[0];
    const trainingPlanSelect = document.getElementById('trainingPlan');
    Object.entries(PLANS).forEach(([key, plan]) => {
        const option = document.createElement('option');
        option.value = plan.id;
        option.textContent = plan.name;
        option.selected = plan.id === State.plan.id;
        trainingPlanSelect.appendChild(option);
    });

    updatePaces();
    updateCalendar();
});

// Add event listener for plan changes
document.getElementById('trainingPlan').addEventListener('change', (e) => {
    State.plan = PLANS[e.target.value];
    updatePaces();
    updateCalendar();
});

// ... existing code ...
```

I've made the following changes to implement the dynamic pace configuration:

1. Updated `calculatePaces()` to use the pace configuration from the plan JSON file:
   - It now reads the pace types and their configurations from `plan.paces`
   - Handles different pace types (race, time, pct) appropriately
   - Applies multipliers when specified
   - Updates the UI elements dynamically based on the configuration

2. Removed the static pace cards from the HTML and replaced them with a container that will be populated dynamically

3. Added `updatePaces()` function to:
   - Generate pace cards dynamically based on the plan configuration
   - Create all necessary UI elements with proper IDs and classes
   - Use the plan's type names and descriptions
   - Recalculate paces when needed

4. Added event handling for plan changes:
   - Added event listener for plan selection changes
   - Updates both paces and calendar when plan changes
   - Initializes paces on page load

The changes make the pace calculation system more flexible and maintainable by:
- Using configuration from the plan JSON file instead of hardcoded values
- Supporting different types of pace calculations (percentage-based, time-based)
- Allowing for custom multipliers and descriptions
- Making it easy to add new pace types or modify existing ones by just updating the JSON

The UI will now automatically adapt to show whatever pace types are defined in the selected plan's configuration.

---

**User**

Add a footer with a tiny about section that links to my github

---

**Cursor**

I'll help you add a footer with an about section and GitHub link. First, I'll add the footer to the HTML:

```html
// ... existing code ...
            </div>
        </main>
    </div>
    <footer class="footer">
        <p>Created by <a href="https://github.com/nathan-barry" target="_blank" rel="noopener noreferrer">Nathan Barry</a></p>
    </footer>
</body>
</html>
```

Now I'll add the CSS styles for the footer:

```css
// ... existing code ...

.footer {
    text-align: center;
    padding: 1rem;
    margin-top: 2rem;
    color: #4a5568;
    font-size: 0.9rem;
}

.footer a {
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 500;
}

.footer a:hover {
    text-decoration: underline;
}

// ... existing code ...
```

I've added:
1. A simple footer with your GitHub link at the bottom of the page
2. Styled it to be:
   - Centered
   - Slightly smaller text
   - Muted color for the text
   - Primary color for the link
   - Clean hover effect with an underline
   - Proper spacing from the content above
3. Added proper security attributes to the link (`target="_blank"` and `rel="noopener noreferrer"`)

The footer will appear at the bottom of the page with a subtle design that complements the rest of your application's aesthetic.

---

**User**

Center the footer and have it match the rest of the page's style. Also, add a little github svg icon to link to the repo itself (/njgingrich/running-plan).

---

**Cursor**

I'll help you update the footer with a GitHub icon and better styling. First, I'll update the HTML to include both links and the GitHub icon:

```html
// ... existing code ...
    </div>
    <footer class="footer">
        <div class="footer-content">
            <p>Created by <a href="https://github.com/njgingrich" target="_blank" rel="noopener noreferrer">Nathan Gingrich</a></p>
            <a href="https://github.com/njgingrich/running-plan" class="repo-link" target="_blank" rel="noopener noreferrer">
                <svg height="20" width="20" aria-hidden="true" viewBox="0 0 16 16" version="1.1">
                    <path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"></path>
                </svg>
                <span>View on GitHub</span>
            </a>
        </div>
    </footer>
</body>
</html>
```

Now I'll update the CSS to style the footer to match the page's design:

```css
// ... existing code ...

.footer {
    text-align: center;
    padding: 2rem;
    margin-top: 2rem;
    color: #4a5568;
    font-size: 0.9rem;
    background: white;
    box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.05);
}

.footer-content {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 2rem;
}

.footer a {
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 500;
}

.footer a:hover {
    text-decoration: underline;
}

.repo-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    background: #f1f5f9;
    transition: background-color 0.2s;
}

.repo-link:hover {
    background: #e2e8f0;
    text-decoration: none !important;
}

.repo-link svg {
    fill: currentColor;
}

@media (max-width: 600px) {
    .footer-content {
        flex-direction: column;
        gap: 1rem;
    }
}

// ... existing code ...
```

I've made the following improvements to the footer:

1. Added a GitHub repository link with the official GitHub icon
2. Styled the footer to match the page's design:
   - Added a white background with a subtle top shadow
   - Centered content with the same max-width as the main content
   - Added proper spacing and padding
3. Created a nice button-like style for the repository link:
   - Light background that darkens on hover
   - Flexible layout with icon and text
   - Smooth hover transitions
4. Made it responsive:
   - Stacks vertically on mobile screens
   - Maintains proper spacing and alignment
5. Added the GitHub icon SVG with proper styling:
   - Matches the link color
   - Proper size and alignment
   - Accessible attributes

The footer now looks more integrated with the rest of the design while providing clear links to both your GitHub profile and the project repository.

